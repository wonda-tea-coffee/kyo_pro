M, N, W = 20, 40, 10

# m人で長さnのケーキを分ける
def solve(m, n, min, max)
  return 0 if max - min > W

  if m == 1
    min = n < min ? n : min
    max = n > min ? n : max

    return max - min <= W ? 1 : 0
  end

  ans = 0
  1.upto(n - m + 1){|i|
    nmin = min > i ? i : min
    nmax = max < i ? i : max
    ans += solve(m - 1, n - i, nmin, nmax)
  }
  ans
end

puts solve(M, N, 0, 0)
